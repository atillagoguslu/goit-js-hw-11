{"version":3,"file":"index.js","sources":["../src/js/pixabayAPI.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst searchText = document.querySelector('[data-search-input]');\nconst searchButton = document.querySelector('[data-search-button]');\n\nconst API_KEY = '49441477-341b75558156795e6f3713ba3';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nconst iziToastSettings = {\n  position: 'topCenter',\n  timeout: 3000,\n  progressBarColor: 'red',\n  transitionIn: 'fadeInDown',\n  transitionOut: 'fadeOutUp',\n};\n\nlet fetchedData = [];\n\nconst otherParams = {\n  lang: 'en',\n  image_type: 'photo',\n  orientation: 'horizontal',\n  safesearch: true,\n};\n\nconst fetchImages = async (query, page = 1) => {\n  try {\n    const response = await fetch(\n      `${BASE_URL}?key=${API_KEY}&q=${query}&page=${page}&${otherParams}`\n    );\n    const data = await response.json();\n    return data.hits;\n  } catch (error) {\n    iziToast.show({\n      ...iziToastSettings,\n      title: 'Error',\n      message: `ðŸŸ¥ We cannot reach the server. Please try again later. ðŸŸ¥`,\n      color: 'red',\n    });\n    return [];\n  }\n};\n\n// Search button event listener and handler -------------------\nconst handleSearch = async event => {\n  event.preventDefault();\n  gallerySection.innerHTML = `\n  <div class=\"loader\">\n    <p>Loading...</p>\n  </div>\n  `;\n  // Loader text\n  const loader = document.querySelector('.loader');\n  if (loader) {\n    loader.style.display = 'flex';\n  }\n  // -----------------\n\n  const query = searchText.value;\n  try {\n    const images = await fetchImages(query);\n    if (images.length === 0) {\n      iziToast.show({\n        ...iziToastSettings,\n        title: 'Error',\n        message: `No images found with \"${query}\" query.`,\n        color: 'red',\n      });\n      return;\n    }\n    fetchedData = images;\n    setGallery(images);\n  } finally {\n    if (loader) {\n      loader.style.display = 'none';\n    }\n  }\n};\nsearchButton.addEventListener('click', handleSearch);\n// ------------------------------------------------------------\n\n// Gallery section\nconst gallerySection = document.querySelector('.gallery-section');\n\nlet lightbox = new SimpleLightbox('.gallery-section a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nconst createGalleryItem = image => {\n  const galleryItem = document.createElement('div');\n  galleryItem.classList.add('gallery-item');\n  galleryItem.innerHTML = `\n    <a href=\"${image.largeImageURL}\">\n      <img width=\"${image.webformatWidth}\" height=\"${image.webformatHeight}\" src=\"${image.webformatURL}\" alt=\"${image.tags}\" />\n    </a>\n    <div class=\"info\">\n      <div class=\"info-box\">\n        <b>Likes</b>\n        ${image.likes}\n      </div>\n      <div class=\"info-box\">\n        <b>Views</b>\n        ${image.views}\n      </div>\n      <div class=\"info-box\">\n        <b>Comments</b>\n        ${image.comments}\n      </div>\n      <div class=\"info-box\">\n        <b>Downloads</b>\n        ${image.downloads}\n      </div>\n    </div>\n  `;\n  return galleryItem;\n};\n\nconst setGallery = images => {\n  gallerySection.innerHTML = '';\n  images.forEach(image => {\n    const galleryItem = createGalleryItem(image);\n    gallerySection.appendChild(galleryItem);\n  });\n  lightbox.refresh();\n};\n"],"names":["searchText","searchButton","API_KEY","BASE_URL","iziToastSettings","fetchedData","otherParams","fetchImages","query","page","iziToast","handleSearch","event","gallerySection","loader","images","setGallery","lightbox","SimpleLightbox","createGalleryItem","image","galleryItem"],"mappings":"6vBAKA,MAAMA,EAAa,SAAS,cAAc,qBAAqB,EACzDC,EAAe,SAAS,cAAc,sBAAsB,EAE5DC,EAAU,qCACVC,EAAW,2BAEXC,EAAmB,CACvB,SAAU,YACV,QAAS,IACT,iBAAkB,MAClB,aAAc,aACd,cAAe,WACjB,EAEA,IAAIC,EAAc,CAAA,EAElB,MAAMC,EAAc,CAClB,KAAM,KACN,WAAY,QACZ,YAAa,aACb,WAAY,EACd,EAEMC,EAAc,MAAOC,EAAOC,EAAO,IAAM,CAC7C,GAAI,CAKF,OADa,MAHI,MAAM,MACrB,GAAGN,CAAQ,QAAQD,CAAO,MAAMM,CAAK,SAASC,CAAI,IAAIH,CAAW,EACvE,GACgC,QAChB,IACb,MAAe,CACd,OAAAI,EAAS,KAAK,CACZ,GAAGN,EACH,MAAO,QACP,QAAS,4DACT,MAAO,KACb,CAAK,EACM,EACR,CACH,EAGMO,EAAe,MAAMC,GAAS,CAClCA,EAAM,eAAc,EACpBC,EAAe,UAAY;AAAA;AAAA;AAAA;AAAA,IAM3B,MAAMC,EAAS,SAAS,cAAc,SAAS,EAC3CA,IACFA,EAAO,MAAM,QAAU,QAIzB,MAAMN,EAAQR,EAAW,MACzB,GAAI,CACF,MAAMe,EAAS,MAAMR,EAAYC,CAAK,EACtC,GAAIO,EAAO,SAAW,EAAG,CACvBL,EAAS,KAAK,CACZ,GAAGN,EACH,MAAO,QACP,QAAS,yBAAyBI,CAAK,WACvC,MAAO,KACf,CAAO,EACD,MACD,CACDH,EAAcU,EACdC,EAAWD,CAAM,CACrB,QAAY,CACJD,IACFA,EAAO,MAAM,QAAU,OAE1B,CACH,EACAb,EAAa,iBAAiB,QAASU,CAAY,EAInD,MAAME,EAAiB,SAAS,cAAc,kBAAkB,EAEhE,IAAII,EAAW,IAAIC,EAAe,qBAAsB,CACtD,aAAc,MACd,aAAc,GAChB,CAAC,EAED,MAAMC,EAAoBC,GAAS,CACjC,MAAMC,EAAc,SAAS,cAAc,KAAK,EAChD,OAAAA,EAAY,UAAU,IAAI,cAAc,EACxCA,EAAY,UAAY;AAAA,eACXD,EAAM,aAAa;AAAA,oBACdA,EAAM,cAAc,aAAaA,EAAM,eAAe,UAAUA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA,UAKhHA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,UAIXA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,UAIXA,EAAM,QAAQ;AAAA;AAAA;AAAA;AAAA,UAIdA,EAAM,SAAS;AAAA;AAAA;AAAA,IAIhBC,CACT,EAEML,EAAaD,GAAU,CAC3BF,EAAe,UAAY,GAC3BE,EAAO,QAAQK,GAAS,CACtB,MAAMC,EAAcF,EAAkBC,CAAK,EAC3CP,EAAe,YAAYQ,CAAW,CAC1C,CAAG,EACDJ,EAAS,QAAO,CAClB"}